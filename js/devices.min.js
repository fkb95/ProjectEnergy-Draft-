function btn_getDevicesClick(){$("#i_getDevices").addClass("fa-spin"),getDevices()}function btn_insertDeviceClick(){$("#i_insertDevice").addClass("fa-spin"),insertDevice()}function getBrandsForDevice(){$.ajax({url:"php/getBrands.php",type:"GET",success:function(e){e=JSON.parse(e),$("#device_brand option").remove(),$("#device_brand").append('<option id="brand_0">Nothing</option>'),$.each(e,function(e,a){$("#device_brand").append('<option brandid="'+a.BrandID+'">'+a.Name+"</option>")})},error:function(e){console.log("getBrands error")}})}function getCategories(){$.ajax({url:"php/getCategories.php",type:"GET",success:function(e){e=JSON.parse(e),$("#category option").remove(),$("#category").append('<option id="category_0">Nothing</option>'),$.each(e,function(e,a){$("#category").append('<option categoryid="'+a.CategoryID+'">'+a.Name+"</option>")})},error:function(e){console.log("getCategories error")}})}function getDevices(){$("#pe_products").addClass("animated fadeOut"),$("#pe_products").remove(),$("#pe_device_container").append('<div id="pe_products" class="row"></div>'),$.ajax({url:"php/getDevices.php",type:"POST",cache:!1,success:function(e){console.log(e),e=JSON.parse(e),e.length>0?$.each(e,function(e,a){$("#pe_products").append(buildCard(a))}):$("#pe_products").append("<h4>No products here... :( </h4>"),$("#i_getDevices").removeClass("fa-spin")},error:function(e){$("#pe_products").append("<h4>Oh no! Something gone wrong :S</h4><small>"+e.statusText+" "+e.status+", try later...</small>"),$("#i_getDevices").removeClass("fa-spin")}})}function getDeviceByID(e){var a={deviceid:e};$.ajax({url:"php/getDeviceByID.php",type:"POST",data:a,success:function(e){e=JSON.parse(e),e=e[0],$("#modal_deviceSpecifics").ready(function(){$("#pe_deviceSpefics").remove(),$("#modal_deviceSpecifics .modal-content").append('<div class="modal-body" id="pe_deviceSpefics"></div>'),$("#pe_deviceSpefics").append('<div class="modal-header-custom"><p class="modal-title">'+e.Brand+" "+e.Name+'</p></div><div class="row modal-table-container"><div class="col-xs-12 col-sm-6 no-padding"><div class="table-container"><div class="table-element field">Category</div><div class="table-element value">'+e.Category+'</div></div></div><div class="col-xs-12 col-sm-6 no-padding"><div class="table-container"><div class="table-element field">Brand</div><div class="table-element value">'+e.Brand+'</div></div></div><div class="col-xs-12 col-sm-6 no-padding"><div class="table-container"><div class="table-element field">Name</div><div class="table-element value">'+e.Name+'</div></div></div><div class="col-xs-12 col-sm-6 no-padding"><div class="table-container"><div class="table-element field">Description</div><div class="table-element value">'+e.Description+'</div></div></div><div class="col-xs-12 col-sm-6 no-padding"><div class="table-container"><div class="table-element field">Consumption</div><div class="table-element value">'+e.kHw+'</div></div></div><div class="col-xs-12 col-sm-6 no-padding"><div class="table-container"><div class="table-element field">Resistence</div><div class="table-element value">'+e.Resistence+'</div></div></div><div class="col-xs-12 col-sm-6 no-padding"><div class="table-container"><div class="table-element field">Min Watts</div><div class="table-element value">'+e.minWatt+'</div></div></div><div class="col-xs-12 col-sm-6 no-padding"><div class="table-container"><div class="table-element field">Max Watts</div><div class="table-element value">'+e.maxWatt+'</div></div></div><div class="col-xs-12 col-sm-6 no-padding"><div class="table-container"><div class="table-element field">Volts</div><div class="table-element value">'+e.Volts+'</div></div></div><div class="col-xs-12 col-sm-6 no-padding"><div class="table-container"><div class="table-element field">Ampere</div><div class="table-element value">'+e.Ampere+'</div></div></div><div class="col-xs-12 col-sm-6 no-padding"><div class="table-container"><div class="table-element field">Website</div><div class="table-element value"><a href="'+e.Website+'">'+e.Website+'</a></div></div></div><div class="col-xs-12 col-sm-6 no-padding"><div class="table-container"><div class="table-element field">Motto</div><div class="table-element value">'+e.BrandDescription+'</div></div></div></div><div class="modal-footer-custom"><button class="modal-button" type="button" data-dismiss="modal">Close</button></div>')})},error:function(e){}})}function getDevicesByTextSearch(e){$("#pe_products").addClass("animated fadeOut"),$("#pe_products").remove(),$("#pe_device_container").append('<div id="pe_products" class="row"></div>');var a={searchstring:e};$.ajax({url:"php/getDevicesByTextSearch.php",type:"POST",data:a,success:function(e){e=JSON.parse(e),e.length>0?$.each(e,function(e,a){$("#pe_products").append(buildCard(a))}):$("#pe_products").append("<h4>No products here... :( </h4>"),$("#i_getDevices").removeClass("fa-spin")},error:function(e){$("#pe_products").append("<h4>Oh no! Something gone wrong :S</h4><small>"+e.statusText+" "+e.status+", try later...</small>"),$("#i_getDevices").removeClass("fa-spin")}})}function insertDevice(){var e=document.getElementById("device_name").value,a=document.getElementById("device_desc").value,t=$("#device_brand").find("option:selected",this).attr("brandid"),i=$("#category").find("option:selected",this).attr("categoryid"),s=parseFloat(document.getElementById("minwatt").value),d=parseFloat(document.getElementById("maxwatt").value),c=parseFloat(document.getElementById("khw").value),n=parseFloat(document.getElementById("volts").value),l=parseFloat(document.getElementById("ampere").value),o=parseFloat(document.getElementById("resistence").value),v={name:e,desc:a,brand:t,category:i,minwatt:s,maxwatt:d,khw:c,volts:n,ampere:l,resistence:o};$.ajax({url:"php/insertDevice.php",type:"POST",data:v,success:function(e){getDevices(),$("#i_insertDevices").removeClass("fa-spin")},error:function(e){console.log(e),$("#i_insertDevices").removeClass("fa-spin")}})}function deleteDeviceByID(e){var a={deviceid:e};$.ajax({url:"php/deleteDeviceByID.php",type:"POST",data:a,success:function(e){getDevices()},error:function(e){console.log(e)}})}function buildCard(e){var a="";switch(e.RootCategoryID){case"1":a="electronic";break;case"2":a="computer";break;case"3":a="console";break;default:a=""}var t='<div class="col-xs-12 col-sm-6 col-md-4 hvr-grow"><div class="card-container '+a+'"><div class="card"><div class="card-title">'+e.Brand+" "+e.Name+'</div><div class="card-divider-big '+a+'"></div><div class="card-info">Brand: '+e.Brand+'</div><div class="card-divider-small '+a+'"></div><div class="card-info">Category: '+e.Category+'</div><div class="card-divider-small '+a+'"></div><div class="card-info">Description: '+e.Description+'</div><div class="card-divider-small '+a+'"></div><div class="card-info">Consumption: '+e.kHw+'</div><div class="card-divider-small '+a+'"></div><button class="card-button '+a+'" type="button" data-toggle="modal"  data-backdrop="static" data-target=".product"  onclick="getDeviceByID('+e.DeviceID+')">More Info</button></div></div></div>';return t}$("#Devices").ready(function(){getDevices(),getBrandsForDevice()}),$("#btn_modal_insertDevice").click(function(){getBrands(),getCategories()}),$(document).on("click",".pe_product_delete",function(){$("#modal_deleteDeviceByID .form-group").remove();var e=$(this).data("id"),a=$(this).data("name");$("#modal_deleteDeviceByID .form-horizontal").append('<div class="form-group"><h3>Do you really want to delete '+a+' ?</h3><button id="btn_insertDevice" data-dismiss="modal" class="btn btn-primary btn-lg" onclick="deleteDeviceByID('+e+')">Yes</button><button type="button" class="btn btn-default btn-lg" data-dismiss="modal">No</button></div>')});var last_searchstring_length;$("#device_search")[0].addEventListener("keyup",function(){var e=document.getElementById("device_search").value;(e.length<last_searchstring_length||3>=last_searchstring_length)&&(e.length>=3?getDevicesByTextSearch(e):last_searchstring_length>2&&getDevices()),last_searchstring_length=e.length});